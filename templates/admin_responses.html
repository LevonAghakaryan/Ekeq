{% extends "base.html" %}

{% block title %}Admin - {{ invitation.event_title }} Responses{% endblock %}

{% block content %}
<section style="padding: 3rem 0;">
    <div class="container">
        <h1 style="margin-bottom: 2rem; color: #d4af37;">
            üìä {{ invitation.event_title }} - Responses
        </h1>

        <!-- ’é’´’≥’°’Ø’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 3rem;">
            <div style="background: #d4edda; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <h2 style="font-size: 2.5rem; color: #155724; margin-bottom: 0.5rem;">{{ stats.total_yes }}</h2>
                <p style="color: #155724; font-weight: 600;">‚úÖ ‘ø’£’°’∂ (’∞’∏’£’´)</p>
            </div>
            <div style="background: #f8d7da; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <h2 style="font-size: 2.5rem; color: #721c24; margin-bottom: 0.5rem;">{{ stats.total_no }}</h2>
                <p style="color: #721c24; font-weight: 600;">‚ùå ’â’•’∂ ’£’°</p>
            </div>
            <div style="background: #fff3cd; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <h2 style="font-size: 2.5rem; color: #856404; margin-bottom: 0.5rem;">{{ stats.total_maybe }}</h2>
                <p style="color: #856404; font-weight: 600;">ü§î ‘≥’∏÷Ç÷Å’• (’∞’∏’£’´)</p>
            </div>
            <div style="background: #d1ecf1; padding: 1.5rem; border-radius: 10px; text-align: center;">
                <h2 style="font-size: 2.5rem; color: #0c5460; margin-bottom: 0.5rem;">{{ stats.total_responses }}</h2>
                <p style="color: #0c5460; font-weight: 600;">üìù ‘∏’∂’§’°’¥’•’∂’® responses</p>
            </div>
        </div>

        <!-- Responses Table -->
        <div style="background: white; border-radius: 15px; padding: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <h2 style="margin-bottom: 1.5rem;">‘≤’∏’¨’∏÷Ä ’∫’°’ø’°’Ω’≠’°’∂’∂’•÷Ä’®</h2>
            
            {% if responses %}
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f8f8f8; border-bottom: 2px solid #d4af37;">
                        <th style="padding: 1rem; text-align: left;">‘±’∂’∏÷Ç’∂</th>
                        <th style="padding: 1rem; text-align: center;">‘ø’£’°’û</th>
                        <th style="padding: 1rem; text-align: center;">’Ä’∏’£’´</th>
                        <th style="padding: 1rem; text-align: left;">’Ä’°’≤’∏÷Ä’§’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂</th>
                        <th style="padding: 1rem; text-align: left;">‘±’¥’Ω’°’©’´’æ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in responses %}
                    <tr style="border-bottom: 1px solid #e0e0e0;">
                        <td style="padding: 1rem;">
                            <strong>{{ r.guest_name }}</strong>
                        </td>
                        <td style="padding: 1rem; text-align: center;">
                            {% if r.attending == 'yes' %}
                                <span style="background: #d4edda; color: #155724; padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600;">‚úÖ ‘±’µ’∏</span>
                            {% elif r.attending == 'no' %}
                                <span style="background: #f8d7da; color: #721c24; padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600;">‚ùå ’à’π</span>
                            {% else %}
                                <span style="background: #fff3cd; color: #856404; padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600;">ü§î ‘≥’∏÷Ç÷Å’•</span>
                            {% endif %}
                        </td>
                        <td style="padding: 1rem; text-align: center;">
                            <strong>{{ r.guest_count }}</strong>
                        </td>
                        <td style="padding: 1rem;">
                            {{ r.message if r.message else '-' }}
                        </td>
                        <td style="padding: 1rem; color: #666; font-size: 0.9rem;">
                            {{ r.submitted_at.strftime('%Y-%m-%d %H:%M') }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p style="text-align: center; color: #999; padding: 2rem;">‘¥’•’º responses ’π’Ø’°’∂</p>
            {% endif %}
        </div>

        <div style="margin-top: 2rem;">
            <a href="/catalog" class="btn btn-secondary">‚Üê ’é’•÷Ä’°’§’°’º’∂’°’¨</a>
        </div>
    </div>
</section>
{% endblock %}