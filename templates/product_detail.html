{% extends "base.html" %}

{% block title %}{{ product.name }} - BelleAme{% endblock %}

{% block content %}
<section class="product-detail">
    <div class="container">
        <a href="/catalog" class="back-link">← Վերադառնալ կատալոգ</a>

        {% if request.query_params.get('order_success') %}
        <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
            ✅ Շնորհակալություն! Ձեր պատվերը ընդունվել է։ Շուտով կապ կհաստատենք ձեզ հետ։
        </div>
        {% endif %}

        <div class="product-layout">
            <div class="product-preview">
                <div class="preview-main">
                    <img src="/static/images/template_{{ product.id }}.png"
                         alt="{{ product.name }}"
                         onerror="this.src='/static/images/placeholder.png'">
                </div>
                <div class="preview-actions">
                    {% if product.invitations %}
                        <a href="/invite/{{ product.invitations[0].slug }}"
                           class="btn btn-primary btn-block"
                           target="_blank">
                           Դիտել Կենդանի Օրինակը
                        </a>
                    {% endif %}
                </div>
            </div>

            <div class="product-details-section">
                <div class="product-header">
                    <span class="product-badge">Կոդ #{{ product.id }}</span>
                    <h1 class="product-title">{{ product.name }}</h1>
                    <div class="product-price-big">{{ product.price }} ֏</div>
                </div>

                <div class="product-description">
                    <h3>Նկարագրություն</h3>
                    <p>Էլեգանտ և ժամանակակից դիզայն հարսանյաց հրավիրատոմսի համար։
                    Անհատականացրեք ձեր անունները, ամսաթիվը և մանրամասները։</p>
                </div>

                <div class="product-features">
                    <h3>Առանձնահատկություններ</h3>
                    <ul class="features-list">
                        <li>✓ Ամբողջությամբ անհատականացվող</li>
                        <li>✓ Responsive դիզայն (բջջային & դեսքթոփ)</li>
                        <li>✓ Հեշտ տարածում սոց․ ցանցերում</li>
                        <li>✓ Անվճար թարմացումներ</li>
                    </ul>
                </div>

                <div class="product-order">
                    <h3 style="margin-bottom: 1rem;">Պատվիրել այս դիզայնը</h3>
                    <form method="POST" action="/product/{{ product.id }}/order">
                        <div class="form-group">
                            <label for="customer_name">Ձեր անուն ազգանունը *</label>
                            <input
                                type="text"
                                id="customer_name"
                                name="customer_name"
                                class="form-control"
                                required
                                placeholder="Անի Սարգսյան">
                        </div>

                        <div class="form-group">
                            <label for="phone_number">Հեռախոսահամար *</label>
                            <input
                                type="tel"
                                id="phone_number"
                                name="phone_number"
                                class="form-control"
                                required
                                placeholder="+374 XX XXX XXX">
                        </div>

                        <div class="form-group">
                            <label for="preferred_contact">Նախընտրելի կապի միջոց *</label>
                            <select
                                id="preferred_contact"
                                name="preferred_contact"
                                class="form-control"
                                required>
                                <option value="">Ընտրեք</option>
                                <option value="WhatsApp">WhatsApp</option>
                                <option value="Telegram">Telegram</option>
                                <option value="Viber">Viber</option>
                                <option value="Phone">Հեռախոսազանգ</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary btn-large btn-block">
                            Պատվիրել հիմա
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}